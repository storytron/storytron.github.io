const _0x15eee4=_0x574a;(function(_0x578867,_0xfd3785){const _0x54c0ee=_0x574a,_0x3647b1=_0x578867();while(!![]){try{const _0xed82e3=parseInt(_0x54c0ee(0x15d))/0x1+parseInt(_0x54c0ee(0x1b6))/0x2*(-parseInt(_0x54c0ee(0x1b8))/0x3)+-parseInt(_0x54c0ee(0x17a))/0x4+-parseInt(_0x54c0ee(0x167))/0x5+parseInt(_0x54c0ee(0x193))/0x6+-parseInt(_0x54c0ee(0x1bf))/0x7*(parseInt(_0x54c0ee(0x17c))/0x8)+-parseInt(_0x54c0ee(0x184))/0x9*(-parseInt(_0x54c0ee(0x1a0))/0xa);if(_0xed82e3===_0xfd3785)break;else _0x3647b1['push'](_0x3647b1['shift']());}catch(_0x58a94c){_0x3647b1['push'](_0x3647b1['shift']());}}}(_0x241c,0x4e171));var storylets=[],storylet,selectedStoryletID,selectedStoryletOrder,editStoryletMode=![],newStoryletMode=![];document[_0x15eee4(0x177)](_0x15eee4(0x16a),function(){const _0x1c8b36=_0x15eee4;storylets['length']===0x0&&document[_0x1c8b36(0x1b0)](_0x1c8b36(0x1a2))[_0x1c8b36(0x1a3)](_0x1c8b36(0x19e),'');},![]);function Storylet(_0xc8963a,_0x3b01c9,_0xf1b557,_0x459174,_0xbe29ca,_0x2b49e1,_0x380997,_0x501466,_0x4330e4,_0x5a93eb,_0x1ab059){const _0x59e121=_0x15eee4;this['id']=_0xc8963a,this['order']=_0x3b01c9,this['title']=_0xf1b557,this[_0x59e121(0x1a5)]=_0x459174,this[_0x59e121(0x1ab)]=_0xbe29ca,this[_0x59e121(0x17b)]=_0x2b49e1,this['response_2']=_0x380997,this[_0x59e121(0x1b7)]=_0x501466,this[_0x59e121(0x161)]=_0x4330e4,this[_0x59e121(0x168)]=_0x5a93eb,this[_0x59e121(0x163)]=_0x1ab059;}function createJson(){}function enabledEditFields(){const _0xa8f64e=_0x15eee4;document[_0xa8f64e(0x1b0)](_0xa8f64e(0x18d))[_0xa8f64e(0x1c4)]('disabled',''),document[_0xa8f64e(0x1b0)](_0xa8f64e(0x175))[_0xa8f64e(0x1c4)]('disabled',''),document[_0xa8f64e(0x1b0)](_0xa8f64e(0x1bb))[_0xa8f64e(0x1c4)](_0xa8f64e(0x19e),''),document[_0xa8f64e(0x1b0)](_0xa8f64e(0x181))['removeAttribute'](_0xa8f64e(0x19e),''),document['getElementById'](_0xa8f64e(0x16c))[_0xa8f64e(0x1c4)](_0xa8f64e(0x19e),''),document[_0xa8f64e(0x1b0)](_0xa8f64e(0x1b9))[_0xa8f64e(0x1c4)](_0xa8f64e(0x19e),''),document[_0xa8f64e(0x1b0)](_0xa8f64e(0x194))[_0xa8f64e(0x1c4)]('disabled',''),document['getElementById'](_0xa8f64e(0x1b3))[_0xa8f64e(0x1c4)](_0xa8f64e(0x19e),''),document[_0xa8f64e(0x1b0)](_0xa8f64e(0x183))[_0xa8f64e(0x1c4)](_0xa8f64e(0x19e),'');}function disableEditFields(){const _0x37505c=_0x15eee4;document[_0x37505c(0x1b0)]('storylet-editor-title')[_0x37505c(0x1a3)]('disabled',''),document[_0x37505c(0x1b0)](_0x37505c(0x175))[_0x37505c(0x1a3)](_0x37505c(0x19e),''),document[_0x37505c(0x1b0)]('storylet-editor-response-1')[_0x37505c(0x1a3)](_0x37505c(0x19e),''),document[_0x37505c(0x1b0)]('storylet-editor-reaction-1')[_0x37505c(0x1a3)](_0x37505c(0x19e),''),document[_0x37505c(0x1b0)]('storylet-editor-response-2')[_0x37505c(0x1a3)](_0x37505c(0x19e),''),document[_0x37505c(0x1b0)](_0x37505c(0x1b9))['setAttribute'](_0x37505c(0x19e),''),document[_0x37505c(0x1b0)]('storylet-editor-response-3')[_0x37505c(0x1a3)]('disabled',''),document[_0x37505c(0x1b0)](_0x37505c(0x1b3))[_0x37505c(0x1a3)](_0x37505c(0x19e),''),document['getElementById'](_0x37505c(0x183))[_0x37505c(0x1a3)]('disabled','');}function clearEditFields(){const _0x594a16=_0x15eee4;document['getElementById'](_0x594a16(0x18d))[_0x594a16(0x17e)]='',document[_0x594a16(0x1b0)](_0x594a16(0x175))[_0x594a16(0x17e)]='',document[_0x594a16(0x1b0)](_0x594a16(0x1bb))['value']='',document[_0x594a16(0x1b0)](_0x594a16(0x181))['value']='',document[_0x594a16(0x1b0)](_0x594a16(0x16c))[_0x594a16(0x17e)]='',document[_0x594a16(0x1b0)](_0x594a16(0x1b9))['value']='',document[_0x594a16(0x1b0)](_0x594a16(0x194))[_0x594a16(0x17e)]='',document['getElementById'](_0x594a16(0x1b3))[_0x594a16(0x17e)]='';}function newStorylet(){const _0x2af79b=_0x15eee4;document[_0x2af79b(0x1b0)]('new-storylet')[_0x2af79b(0x1a3)]('disabled',''),document[_0x2af79b(0x1b0)]('edit-storylet')[_0x2af79b(0x1a3)](_0x2af79b(0x19e),''),document[_0x2af79b(0x1b0)]('save-storylet')['removeAttribute'](_0x2af79b(0x19e),''),newStoryletMode=!![],editStoryletMode=![],enabledEditFields(),clearEditFields(),storylet=new Storylet();let _0x3371c8=_0x2af79b(0x18c)+(storylets[_0x2af79b(0x17d)]+0x1),_0x59ad55=generateRandomID(),_0x3e45f1=generateOrderID();storylet[_0x2af79b(0x188)]=_0x3371c8,storylet['id']=_0x59ad55,storylet['order']=_0x3e45f1,storylet['next']='',document['getElementById'](_0x2af79b(0x18d))[_0x2af79b(0x17e)]=_0x3371c8,document['getElementById'](_0x2af79b(0x183))['value']=_0x2af79b(0x15e),selectedStoryletId=_0x59ad55;}function editStorylet(){const _0x3a29af=_0x15eee4;document['getElementById'](_0x3a29af(0x15f))[_0x3a29af(0x1a3)](_0x3a29af(0x19e),''),document[_0x3a29af(0x1b0)](_0x3a29af(0x1a2))[_0x3a29af(0x1a3)](_0x3a29af(0x19e),''),document[_0x3a29af(0x1b0)]('save-storylet')[_0x3a29af(0x1c4)](_0x3a29af(0x19e),''),newStoryletMode=![],editStoryletMode=!![],enabledEditFields();}function saveStorylet(){const _0xe21f0a=_0x15eee4;document[_0xe21f0a(0x1b0)](_0xe21f0a(0x15f))[_0xe21f0a(0x1c4)]('disabled',''),document[_0xe21f0a(0x1b0)](_0xe21f0a(0x1a2))[_0xe21f0a(0x1c4)]('disabled',''),document['getElementById']('save-storylet')[_0xe21f0a(0x1a3)](_0xe21f0a(0x19e),''),disableEditFields();if(newStoryletMode===!![]){storylet[_0xe21f0a(0x188)]=document[_0xe21f0a(0x1b0)]('storylet-editor-title')[_0xe21f0a(0x17e)],storylet[_0xe21f0a(0x1a5)]=document[_0xe21f0a(0x1b0)](_0xe21f0a(0x175))[_0xe21f0a(0x17e)],storylet[_0xe21f0a(0x1ab)]=document[_0xe21f0a(0x1b0)](_0xe21f0a(0x1bb))[_0xe21f0a(0x17e)],storylet['reaction_1']=document[_0xe21f0a(0x1b0)](_0xe21f0a(0x181))[_0xe21f0a(0x17e)],storylet[_0xe21f0a(0x18a)]=document[_0xe21f0a(0x1b0)](_0xe21f0a(0x16c))[_0xe21f0a(0x17e)],storylet[_0xe21f0a(0x1b7)]=document['getElementById'](_0xe21f0a(0x1b9))[_0xe21f0a(0x17e)],storylet['response_3']=document[_0xe21f0a(0x1b0)]('storylet-editor-response-3')[_0xe21f0a(0x17e)],storylet[_0xe21f0a(0x168)]=document[_0xe21f0a(0x1b0)]('storylet-editor-reaction-3')[_0xe21f0a(0x17e)];let _0x4e6670=document[_0xe21f0a(0x1b0)](_0xe21f0a(0x183)),_0x236186=_0x4e6670['options'][_0x4e6670['selectedIndex']]['id'];storylet[_0xe21f0a(0x163)]=_0x236186,storylets[_0xe21f0a(0x1c3)](storylet);let _0x214235=document[_0xe21f0a(0x1b0)](_0xe21f0a(0x197)),_0x2ea27c=document[_0xe21f0a(0x170)](_0xe21f0a(0x171));_0x2ea27c[_0xe21f0a(0x1a5)]=storylet[_0xe21f0a(0x188)],_0x2ea27c['id']=selectedStoryletId,_0x2ea27c[_0xe21f0a(0x190)][_0xe21f0a(0x1a6)]=_0xe21f0a(0x19f),_0x2ea27c[_0xe21f0a(0x177)]('click',_0x2bd03a=>{displaySelectedStorylet(_0x2bd03a);}),_0x214235[_0xe21f0a(0x17f)][_0xe21f0a(0x176)](_0x2ea27c);}else{if(editStoryletMode===!![]){let _0x1c5b0f=document[_0xe21f0a(0x1b0)](_0xe21f0a(0x197)),_0x1e9328=_0x1c5b0f[_0xe21f0a(0x1ad)];selectedStoryletId=_0x1e9328[_0xe21f0a(0x1b4)](0x0)['id'],storylets[_0xe21f0a(0x16b)](_0x57a5a5=>{const _0x37f269=_0xe21f0a;if(_0x57a5a5['id']===selectedStoryletId){_0x57a5a5['title']=document[_0x37f269(0x1b0)](_0x37f269(0x18d))[_0x37f269(0x17e)],_0x57a5a5['text']=document[_0x37f269(0x1b0)]('storylet-editor-text')[_0x37f269(0x17e)],_0x57a5a5[_0x37f269(0x1ab)]=document[_0x37f269(0x1b0)](_0x37f269(0x1bb))['value'],_0x57a5a5[_0x37f269(0x17b)]=document[_0x37f269(0x1b0)](_0x37f269(0x181))[_0x37f269(0x17e)],_0x57a5a5[_0x37f269(0x18a)]=document[_0x37f269(0x1b0)](_0x37f269(0x16c))[_0x37f269(0x17e)],_0x57a5a5['reaction_2']=document[_0x37f269(0x1b0)]('storylet-editor-reaction-2')['value'],_0x57a5a5[_0x37f269(0x161)]=document['getElementById'](_0x37f269(0x194))[_0x37f269(0x17e)],_0x57a5a5[_0x37f269(0x168)]=document[_0x37f269(0x1b0)](_0x37f269(0x1b3))[_0x37f269(0x17e)];let _0x11a12a=document[_0x37f269(0x1b0)](_0x37f269(0x183)),_0x3c37ae=_0x11a12a[_0x37f269(0x17f)][_0x11a12a['selectedIndex']]['id'];_0x57a5a5[_0x37f269(0x163)]=_0x3c37ae;}}),_0x1e9328['item'](0x0)['text']=document['getElementById'](_0xe21f0a(0x18d))[_0xe21f0a(0x17e)];}}previewStorylet();newStoryletMode===!![]&&(newStoryletMode=![]);;editStoryletMode===!![]&&(editStoryletMode=![]);;console[_0xe21f0a(0x195)](storylets),createJson();}function deleteStorylet(){const _0x53ea7b=_0x15eee4;let _0x58ed44=0x0,_0xef6d65=storylets[_0x53ea7b(0x17d)]-0x1;for(let _0x4eedc1=0x0;_0x4eedc1<=_0xef6d65;_0x4eedc1++){if(storylets[_0x4eedc1]['id']===selectedStoryletID){_0x58ed44=storylets[_0x4eedc1][_0x53ea7b(0x165)],storylets[_0x53ea7b(0x192)](_0x4eedc1,0x1);break;};};_0xef6d65=storylets[_0x53ea7b(0x17d)]-0x1;for(let _0x321305=0x0;_0x321305<=_0xef6d65;_0x321305++){storylets[_0x321305][_0x53ea7b(0x165)]>_0x58ed44&&(storylets[_0x321305]['order']=storylets[_0x321305][_0x53ea7b(0x165)]-0x1);;}clearStoryletFields(),clearPlayerFields(),rebuildStoryletList(_0x53ea7b(0x162)),document[_0x53ea7b(0x1b0)]('delete-storylet')['setAttribute']('disabled','');}function clearPlayerFields(){const _0x1a199a=_0x15eee4;document['getElementById']('storylet-player-text')[_0x1a199a(0x179)]='',document[_0x1a199a(0x1b0)](_0x1a199a(0x18b))['innerHTML']='',document[_0x1a199a(0x1b0)](_0x1a199a(0x16f))[_0x1a199a(0x179)]='',document[_0x1a199a(0x1b0)](_0x1a199a(0x1a7))[_0x1a199a(0x179)]='';}function previewStorylet(_0x3b84c1){const _0x32be39=_0x15eee4;storylets[_0x32be39(0x16b)](_0x554880=>{const _0x4045f4=_0x32be39;if(_0x554880['id']===_0x3b84c1){let _0x28e6ca=_0x554880['text'][_0x4045f4(0x174)](/\n/g,_0x4045f4(0x166));document[_0x4045f4(0x1b0)](_0x4045f4(0x1aa))[_0x4045f4(0x179)]=_0x28e6ca,document[_0x4045f4(0x1b0)]('storylet-player-response-1')['innerHTML']=_0x554880['response_1'],document[_0x4045f4(0x1b0)](_0x4045f4(0x16f))[_0x4045f4(0x179)]=_0x554880[_0x4045f4(0x18a)],document['getElementById']('storylet-player-response-3')[_0x4045f4(0x179)]=_0x554880[_0x4045f4(0x161)];};});}function generateRandomID(){const _0x52a28d=_0x15eee4;return Math[_0x52a28d(0x180)]()[_0x52a28d(0x160)](0x24)[_0x52a28d(0x1bc)](0x2,0x9);}function generateOrderID(){return storylets['length']+0x1;}function _0x241c(){const _0x33b880=['HTTP\x20Error!\x20Status:\x20$(response.status)','response_2','storylet-player-response-1','New\x20Storylet\x20','storylet-editor-title','slice','next-link','style','STORYWORLD\x20PLAYER','splice','3819876TypkpR','storylet-editor-response-3','log','storyworld-name','list-of-storylets','target','selected','onclick','after-move','stringify','concat','disabled','14px','34310YcYQFn','download','edit-storylet','setAttribute','click','text','fontSize','storylet-player-response-3','fontsize','STORYLET\x20PREVIEW','storylet-player-text','response_1','THE\x20STORYWORLD\x20HAS\x20FINISHED.','selectedOptions','Preview','createObjectURL','getElementById','Please\x20provide\x20a\x20name\x20for\x20your\x20storyworld.\x0a\x0aNote:\x20Use\x20only\x20alphanumeric\x20characters\x20and\x20spaces\x20in\x20the\x20name.','type','storylet-editor-reaction-3','item','result','10nMPzuL','reaction_2','212460uibbmi','storylet-editor-reaction-2','.json','storylet-editor-response-1','substring','player-command-menu','then','4211921ntrHOb','display:none','readAsText','player-title','push','removeAttribute','159304qSYnCe','NEXT\x20STORYLET\x20IN\x20LIST','new-storylet','toString','response_3','after-delete','next','href','order','<br>','3023745bXoAvn','reaction_3','move-storylet-down','DOMContentLoaded','forEach','storylet-editor-response-2','reaction_','move-storylet-up','storylet-player-response-2','createElement','option','trim','focus','replace','storylet-editor-text','add','addEventListener','UTF-8','innerHTML','245980MolYHQ','reaction_1','8xrGgzI','length','value','options','random','storylet-editor-reaction-1','onchange','list-of-branches','3006TKaRSX','delete-storylet','onload','setTimeout','title'];_0x241c=function(){return _0x33b880;};return _0x241c();}function loadSampleStoryworld(){const _0x2de443=_0x15eee4;clearEditFields(),disableEditFields(),document[_0x2de443(0x1b0)](_0x2de443(0x16e))['setAttribute'](_0x2de443(0x19e),''),document[_0x2de443(0x1b0)](_0x2de443(0x169))[_0x2de443(0x1a3)](_0x2de443(0x19e),''),document['getElementById'](_0x2de443(0x197))[_0x2de443(0x179)]=null,document[_0x2de443(0x1b0)](_0x2de443(0x1bd))[_0x2de443(0x17e)]=_0x2de443(0x1ae),previewOrPlay(),fetch('./sampleStorylets.json')[_0x2de443(0x1be)](_0x3a1a27=>{const _0x21059d=_0x2de443;if(!_0x3a1a27['ok'])throw new Error(_0x21059d(0x189));return _0x3a1a27['json']();})[_0x2de443(0x1be)](_0x4244e2=>{const _0x18e95f=_0x2de443;storylets=_0x4244e2;let _0xcf0435=storylets[_0x18e95f(0x17d)],_0x3382cd=document['getElementById'](_0x18e95f(0x197)),_0x35a8be=document[_0x18e95f(0x1b0)](_0x18e95f(0x183));for(let _0x2db94e=0x1;_0x2db94e<=_0xcf0435;_0x2db94e++){storylets[_0x18e95f(0x16b)](_0x213329=>{const _0x42d74d=_0x18e95f;if(_0x213329['order']===_0x2db94e){let _0x3b4ba1=document[_0x42d74d(0x170)](_0x42d74d(0x171));_0x3b4ba1['text']=_0x213329[_0x42d74d(0x188)],_0x3b4ba1['id']=_0x213329['id'],_0x3b4ba1[_0x42d74d(0x190)]['fontSize']=_0x42d74d(0x19f),_0x3b4ba1[_0x42d74d(0x177)](_0x42d74d(0x1a4),_0x7a2ac1=>{displaySelectedStorylet(_0x7a2ac1);}),_0x3382cd['options'][_0x42d74d(0x176)](_0x3b4ba1);let _0x3ef48b=document[_0x42d74d(0x170)](_0x42d74d(0x171));_0x3ef48b[_0x42d74d(0x1a5)]=_0x213329[_0x42d74d(0x188)],_0x3ef48b['id']=_0x213329['id'],_0x3ef48b[_0x42d74d(0x190)][_0x42d74d(0x1a8)]=_0x42d74d(0x19f),_0x35a8be['options'][_0x42d74d(0x176)](_0x3ef48b);}});};})['catch'](_0x5b1de8=>console['error']('Unable\x20to\x20fetch\x20data:',_0x5b1de8));}function _0x574a(_0x21dfee,_0x564acb){const _0x241c9e=_0x241c();return _0x574a=function(_0x574ae7,_0xb81de7){_0x574ae7=_0x574ae7-0x15d;let _0x2cb554=_0x241c9e[_0x574ae7];return _0x2cb554;},_0x574a(_0x21dfee,_0x564acb);}function displaySelectedStorylet(_0x46eaf4){const _0x138c1d=_0x15eee4;let _0x21a8ba=document[_0x138c1d(0x1b0)]('list-of-storylets'),_0x109881=_0x21a8ba[_0x138c1d(0x1ad)];selectedStoryletID=_0x109881[_0x138c1d(0x1b4)](0x0)['id'],clearStoryletFields(),storylets[_0x138c1d(0x16b)](_0xd81323=>{const _0x1e1228=_0x138c1d;if(_0xd81323['id']===selectedStoryletID){document[_0x1e1228(0x1b0)](_0x1e1228(0x18d))[_0x1e1228(0x17e)]=_0xd81323[_0x1e1228(0x188)],document[_0x1e1228(0x1b0)](_0x1e1228(0x175))['value']=_0xd81323[_0x1e1228(0x1a5)],document[_0x1e1228(0x1b0)](_0x1e1228(0x1bb))[_0x1e1228(0x17e)]=_0xd81323[_0x1e1228(0x1ab)],document[_0x1e1228(0x1b0)](_0x1e1228(0x181))[_0x1e1228(0x17e)]=_0xd81323['reaction_1'],document[_0x1e1228(0x1b0)](_0x1e1228(0x16c))[_0x1e1228(0x17e)]=_0xd81323[_0x1e1228(0x18a)],document[_0x1e1228(0x1b0)](_0x1e1228(0x1b9))[_0x1e1228(0x17e)]=_0xd81323['reaction_2'],document[_0x1e1228(0x1b0)](_0x1e1228(0x194))[_0x1e1228(0x17e)]=_0xd81323['response_3'],document[_0x1e1228(0x1b0)](_0x1e1228(0x1b3))[_0x1e1228(0x17e)]=_0xd81323['reaction_3'];_0xd81323[_0x1e1228(0x163)]===''?document[_0x1e1228(0x1b0)](_0x1e1228(0x183))[_0x1e1228(0x17e)]=_0x1e1228(0x15e):document[_0x1e1228(0x1b0)](_0x1e1228(0x183))[_0x1e1228(0x17e)]=_0x338b45(_0xd81323['next']);;};});function _0x338b45(_0x3b362e){let _0x38fa0e='';return storylets['forEach'](_0x3db0e8=>{const _0x2422b7=_0x574a;_0x3db0e8['id']===_0x3b362e&&(_0x38fa0e=_0x3db0e8[_0x2422b7(0x188)]);;}),_0x38fa0e;}previewStorylet(selectedStoryletID);storylets[_0x138c1d(0x17d)]>0x1&&document[_0x138c1d(0x1b0)](_0x138c1d(0x185))[_0x138c1d(0x1c4)](_0x138c1d(0x19e),'');;document[_0x138c1d(0x1b0)](_0x138c1d(0x1a2))[_0x138c1d(0x1c4)](_0x138c1d(0x19e),''),selectedStoryletOrder=getSelectedStoryletOrder(selectedStoryletID);let _0x2bbf9e=storylets[_0x138c1d(0x17d)];if(storylets[_0x138c1d(0x17d)]>0x1){switch(selectedStoryletOrder){case 0x1:document[_0x138c1d(0x1b0)]('move-storylet-up')[_0x138c1d(0x1a3)]('disabled',''),document[_0x138c1d(0x1b0)](_0x138c1d(0x169))[_0x138c1d(0x1c4)](_0x138c1d(0x19e),'');break;case _0x2bbf9e:document[_0x138c1d(0x1b0)](_0x138c1d(0x16e))['removeAttribute'](_0x138c1d(0x19e),''),document[_0x138c1d(0x1b0)](_0x138c1d(0x169))[_0x138c1d(0x1a3)](_0x138c1d(0x19e),'');break;default:document['getElementById'](_0x138c1d(0x16e))['removeAttribute'](_0x138c1d(0x19e),''),document['getElementById'](_0x138c1d(0x169))[_0x138c1d(0x1c4)]('disabled','');};};}function clearStoryletFields(){const _0x4ca88a=_0x15eee4;document[_0x4ca88a(0x1b0)](_0x4ca88a(0x18d))['value']='',document[_0x4ca88a(0x1b0)](_0x4ca88a(0x175))['value']='',document[_0x4ca88a(0x1b0)](_0x4ca88a(0x1bb))['value']='',document[_0x4ca88a(0x1b0)](_0x4ca88a(0x181))[_0x4ca88a(0x17e)]='',document[_0x4ca88a(0x1b0)](_0x4ca88a(0x16c))[_0x4ca88a(0x17e)]='',document[_0x4ca88a(0x1b0)]('storylet-editor-reaction-2')['value']='',document[_0x4ca88a(0x1b0)](_0x4ca88a(0x194))['value']='',document[_0x4ca88a(0x1b0)](_0x4ca88a(0x1b3))['value']='';}function getSelectedStoryletOrder(_0x35235a){let _0x12e041=0x0;return storylets['forEach'](_0x5de875=>{const _0x200eb5=_0x574a;_0x5de875['id']===_0x35235a&&(_0x12e041=_0x5de875[_0x200eb5(0x165)]);;}),_0x12e041;}function moveStoryletUp(){const _0x1225fd=_0x15eee4;let _0x171448=selectedStoryletOrder-0x1;storylets['forEach'](_0x528d53=>{const _0x2b24d7=_0x574a;_0x528d53['order']===_0x171448&&(_0x528d53[_0x2b24d7(0x165)]=_0x528d53['order']+0x1);;}),storylets[_0x1225fd(0x16b)](_0x1d036d=>{const _0x3ca369=_0x1225fd;_0x1d036d['id']===selectedStoryletID&&(_0x1d036d[_0x3ca369(0x165)]=_0x1d036d[_0x3ca369(0x165)]-0x1);;}),rebuildStoryletList(_0x1225fd(0x19b));}function moveStoryletDown(){const _0x2ec235=_0x15eee4;let _0xa8b215=selectedStoryletOrder+0x1;storylets[_0x2ec235(0x16b)](_0x4a2100=>{const _0x385fc2=_0x2ec235;_0x4a2100[_0x385fc2(0x165)]===_0xa8b215&&(_0x4a2100[_0x385fc2(0x165)]=_0x4a2100['order']-0x1);;}),storylets[_0x2ec235(0x16b)](_0x3fc2b9=>{const _0x8c624a=_0x2ec235;_0x3fc2b9['id']===selectedStoryletID&&(_0x3fc2b9[_0x8c624a(0x165)]=_0x3fc2b9['order']+0x1);;}),rebuildStoryletList(_0x2ec235(0x19b));}function rebuildStoryletList(_0x784198){const _0x3373f9=_0x15eee4;document[_0x3373f9(0x1b0)](_0x3373f9(0x16e))[_0x3373f9(0x1a3)](_0x3373f9(0x19e),''),document[_0x3373f9(0x1b0)]('move-storylet-down')[_0x3373f9(0x1a3)](_0x3373f9(0x19e),''),document[_0x3373f9(0x1b0)](_0x3373f9(0x197))[_0x3373f9(0x179)]=null;let _0x180169=storylets[_0x3373f9(0x17d)],_0x5bdec7=document[_0x3373f9(0x1b0)](_0x3373f9(0x197));for(let _0xea582d=0x1;_0xea582d<=_0x180169;_0xea582d++){storylets[_0x3373f9(0x16b)](_0x2a75a4=>{const _0x5cebfa=_0x3373f9;if(_0x2a75a4[_0x5cebfa(0x165)]===_0xea582d){let _0xc9b116=document[_0x5cebfa(0x170)](_0x5cebfa(0x171));_0xc9b116[_0x5cebfa(0x1a5)]=_0x2a75a4[_0x5cebfa(0x188)],_0xc9b116['id']=_0x2a75a4['id'],_0xc9b116[_0x5cebfa(0x190)][_0x5cebfa(0x1a6)]=_0x5cebfa(0x19f),_0xc9b116[_0x5cebfa(0x177)](_0x5cebfa(0x1a4),_0x5132de=>{displaySelectedStorylet(_0x5132de);}),_0x5bdec7[_0x5cebfa(0x17f)][_0x5cebfa(0x176)](_0xc9b116);}});};_0x784198===_0x3373f9(0x19b)&&(document['getElementById'](selectedStoryletID)[_0x3373f9(0x1a3)](_0x3373f9(0x199),''),document[_0x3373f9(0x1b0)](_0x3373f9(0x197))[_0x3373f9(0x173)](),displaySelectedStorylet());}function downloadStoryworld(){const _0x3065ef=_0x15eee4;let _0x50d71a=document[_0x3065ef(0x1b0)](_0x3065ef(0x196))[_0x3065ef(0x17e)]['trim']();if(_0x50d71a[_0x3065ef(0x17d)]>0x0){_0x50d71a=_0x50d71a[_0x3065ef(0x174)](/ /g,'_')[_0x3065ef(0x19d)](_0x3065ef(0x1ba));let _0x47accf=JSON[_0x3065ef(0x19c)](storylets),_0x2e083e=new Blob([_0x47accf],{'type':'text/plain'}),_0x49ec0f=document[_0x3065ef(0x170)]('a');_0x49ec0f[_0x3065ef(0x164)]=URL[_0x3065ef(0x1af)](_0x2e083e),_0x49ec0f[_0x3065ef(0x1a1)]=_0x50d71a,_0x49ec0f[_0x3065ef(0x1a4)](),URL['revokeObjectURL'](_0x49ec0f['href']);}else alert(_0x3065ef(0x1b1));;}function uploadStoryworld(){const _0x58d32c=_0x15eee4;clearEditFields(),disableEditFields(),document[_0x58d32c(0x1b0)](_0x58d32c(0x16e))[_0x58d32c(0x1a3)](_0x58d32c(0x19e),''),document[_0x58d32c(0x1b0)](_0x58d32c(0x169))['setAttribute'](_0x58d32c(0x19e),''),document[_0x58d32c(0x1b0)](_0x58d32c(0x197))[_0x58d32c(0x179)]=null,document[_0x58d32c(0x1b0)]('player-command-menu')['value']=_0x58d32c(0x1ae),previewOrPlay();let _0xfa1301='',_0x30404b=document['createElement']('input');_0x30404b[_0x58d32c(0x1b2)]='file',_0x30404b[_0x58d32c(0x182)]=_0x2565e2=>{const _0x4cba8f=_0x58d32c;let _0x5c0b66=_0x2565e2['target']['files'][0x0],_0x39a852=new FileReader();_0x39a852[_0x4cba8f(0x1c1)](_0x5c0b66,_0x4cba8f(0x178)),_0x39a852[_0x4cba8f(0x186)]=_0x2684b6=>{const _0x729a97=_0x4cba8f;_0xfa1301=_0x2684b6[_0x729a97(0x198)][_0x729a97(0x1b5)],storylets=JSON['parse'](_0xfa1301),console[_0x729a97(0x195)](storylets);let _0xcde9d1=storylets[_0x729a97(0x17d)],_0x11bd43=document[_0x729a97(0x1b0)](_0x729a97(0x197)),_0x3b5a86=document[_0x729a97(0x1b0)]('list-of-branches');for(let _0x47ec4d=0x1;_0x47ec4d<=_0xcde9d1;_0x47ec4d++){storylets[_0x729a97(0x16b)](_0x451634=>{const _0x257b85=_0x729a97;if(_0x451634[_0x257b85(0x165)]===_0x47ec4d){let _0x523a67=document[_0x257b85(0x170)](_0x257b85(0x171));_0x523a67[_0x257b85(0x1a5)]=_0x451634[_0x257b85(0x188)],_0x523a67['id']=_0x451634['id'],_0x523a67[_0x257b85(0x190)][_0x257b85(0x1a6)]='14px',_0x523a67[_0x257b85(0x177)]('click',_0x764484=>{displaySelectedStorylet(_0x764484);}),_0x11bd43[_0x257b85(0x17f)]['add'](_0x523a67);let _0x45386e=document[_0x257b85(0x170)](_0x257b85(0x171));_0x45386e[_0x257b85(0x1a5)]=_0x451634[_0x257b85(0x188)],_0x45386e['id']=_0x451634['id'],_0x45386e[_0x257b85(0x190)]['fontsize']='14px',_0x3b5a86[_0x257b85(0x17f)]['add'](_0x45386e);}});};};},_0x30404b[_0x58d32c(0x1a4)]();}function previewOrPlay(){const _0xcaf926=_0x15eee4;let _0x49d274=document[_0xcaf926(0x1b0)](_0xcaf926(0x1bd))[_0xcaf926(0x17e)];switch(_0x49d274){case _0xcaf926(0x1ae):document[_0xcaf926(0x1b0)](_0xcaf926(0x1c2))['innerText']=_0xcaf926(0x1a9),document['getElementById'](_0xcaf926(0x197))[_0xcaf926(0x1c4)]('disabled',''),clearPlayerFields(),previewStorylet(selectedStoryletID);break;case'Play':document[_0xcaf926(0x1b0)](_0xcaf926(0x1c2))['innerText']=_0xcaf926(0x191),document['getElementById'](_0xcaf926(0x197))[_0xcaf926(0x1a3)]('disabled',''),document[_0xcaf926(0x1b0)](_0xcaf926(0x197))[_0xcaf926(0x17e)]='',clearEditFields(),clearPlayerFields(),selectedStoryletID='',playStoryworld();break;default:};}function playStoryworld(){const _0x5d1e7b=_0x15eee4;if(document[_0x5d1e7b(0x1b0)](_0x5d1e7b(0x1bd))[_0x5d1e7b(0x17e)]===_0x5d1e7b(0x1ae))return;var _0x323341='',_0x31b06a;let _0x13a036=0x1,_0x29e325=storylets['length'],_0x457362='',_0x4fde83=document[_0x5d1e7b(0x1b0)]('storylet-player-text'),_0x3e8c1a=document['getElementById'](_0x5d1e7b(0x18b)),_0x5bfb90=document[_0x5d1e7b(0x1b0)](_0x5d1e7b(0x16f)),_0x2325b1=document[_0x5d1e7b(0x1b0)](_0x5d1e7b(0x1a7));_0x3e8c1a[_0x5d1e7b(0x19a)]=function(){_0x4f6af5(_0x3e8c1a);},_0x5bfb90['onclick']=function(){_0x4f6af5(_0x5bfb90);},_0x2325b1[_0x5d1e7b(0x19a)]=function(){_0x4f6af5(_0x2325b1);};let _0x202d50=document[_0x5d1e7b(0x1b0)](_0x5d1e7b(0x18f));_0x202d50[_0x5d1e7b(0x19a)]=function(){_0x2edacc();},_0x56b322(_0x13a036);function _0x56b322(_0xdb904d){const _0x5a0169=_0x5d1e7b;_0x31b06a=!![];_0xdb904d<=_0x29e325?(_0x323341=_0x6d35f5(_0xdb904d),clearPlayerFields(),previewStorylet(_0x323341),_0x457362=_0x38a291(_0x323341),window[_0x5a0169(0x187)](function(){_0x31b06a=!![],_0x290238();},0x3e8)):(clearPlayerFields(),document[_0x5a0169(0x1b0)]('player-messages')['innerHTML']=_0x5a0169(0x1ac),window[_0x5a0169(0x187)](function(){const _0x2c886b=_0x5a0169;document[_0x2c886b(0x1b0)]('player-messages')[_0x2c886b(0x179)]='';},0x1388));;};function _0x290238(){if(!_0x31b06a){_0x457362!=''?_0x13a036=_0x3586d0(_0x457362):_0x13a036=_0x13a036+0x1;;_0x56b322(_0x13a036),_0x31b06a=!_0x31b06a;};}function _0x6d35f5(_0x148052){const _0xcae33=_0x5d1e7b;let _0x8ed597='';return storylets[_0xcae33(0x16b)](_0x7c4e34=>{const _0x1e1101=_0xcae33;_0x7c4e34[_0x1e1101(0x165)]===_0x148052&&(_0x8ed597=_0x7c4e34['id']);;}),_0x8ed597;}function _0x38a291(_0x1cd14b){const _0x2678ca=_0x5d1e7b;let _0x5e63a3='';return storylets[_0x2678ca(0x16b)](_0x47f11c=>{const _0x1093ad=_0x2678ca;_0x47f11c['id']===_0x1cd14b&&(_0x5e63a3=_0x47f11c[_0x1093ad(0x163)]);;}),_0x5e63a3;};function _0x3586d0(_0x259d40){const _0xeb883=_0x5d1e7b;let _0xb02a87='';return storylets[_0xeb883(0x16b)](_0x477aa7=>{_0x477aa7['id']==_0x259d40&&(_0xb02a87=_0x477aa7['order']);;}),_0xb02a87;};function _0x4f6af5(_0x33f486){const _0x314aac=_0x5d1e7b;_0x31b06a=!_0x31b06a;let _0xa7a458=_0x251661(_0x33f486);_0xa7a458[_0x314aac(0x17d)]>0x0?(_0x3e8c1a['innerHTML']='',_0x5bfb90[_0x314aac(0x179)]='',_0x2325b1[_0x314aac(0x179)]='',_0x4fde83['innerHTML']=_0xa7a458,document[_0x314aac(0x1b0)](_0x314aac(0x18f))[_0x314aac(0x1c4)]('style')):!_0x31b06a&&_0x290238();}function _0x251661(_0x196a10){const _0x2fde20=_0x5d1e7b;let _0x1e0ff9=_0x196a10['id'][_0x2fde20(0x18e)](-0x1),_0x28b1aa=_0x2fde20(0x16d)+_0x1e0ff9,_0x22015b='';return storylets[_0x2fde20(0x16b)](_0x160543=>{const _0x246c0b=_0x2fde20;if(_0x160543['order']===_0x13a036)switch(_0x28b1aa){case _0x246c0b(0x17b):_0x22015b=_0x160543[_0x246c0b(0x17b)][_0x246c0b(0x172)]();break;case _0x246c0b(0x1b7):_0x22015b=_0x160543[_0x246c0b(0x1b7)][_0x246c0b(0x172)]();break;case _0x246c0b(0x168):_0x22015b=_0x160543[_0x246c0b(0x168)][_0x246c0b(0x172)]();break;default:}}),_0x22015b;}function _0x2edacc(){const _0x28d840=_0x5d1e7b;pause=!_0x31b06a,document['getElementById'](_0x28d840(0x18f))[_0x28d840(0x1a3)](_0x28d840(0x190),_0x28d840(0x1c0)),!_0x31b06a&&_0x290238();}}